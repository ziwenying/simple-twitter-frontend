(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a68021f8"],{"0883":function(t,a,e){"use strict";e("59fc")},"4ef5":function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t._self._c;return a("div",{staticClass:"row setting-wrapper"},[a("Navbar",{staticClass:"col-2 pl-0"}),a("div",{staticClass:"col-7 setting-form-area"},[a("h4",[t._v("帳戶設定")]),a("hr"),a("form",{attrs:{action:"submit"},on:{submit:function(a){return a.preventDefault(),a.stopPropagation(),t.handleSubmit.apply(null,arguments)}}},[a("div",{staticClass:"setting-form-container"},[a("div",{staticClass:"form-container"},[a("div",{staticClass:"form-field account-field"},[a("label",{attrs:{for:"account"}},[t._v("帳號")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],attrs:{id:"account",name:"account",type:"text",placeholder:"請輸入帳號",required:""},domProps:{value:t.account},on:{input:function(a){a.target.composing||(t.account=a.target.value)}}}),"The account is registered."===t.errorMsg?a("div",{staticClass:"alert-msg"},[a("span",{staticClass:"msg"},[t._v("account已重複註冊！")])]):t._e()]),a("div",{staticClass:"form-field name-field"},[a("label",{attrs:{for:"name"}},[t._v("名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],class:{error:t.name.length>50},attrs:{id:"name",name:"name",type:"text",placeholder:"請輸入使用者名稱",required:""},domProps:{value:t.name},on:{input:function(a){a.target.composing||(t.name=a.target.value)}}}),a("div",{staticClass:"alert-msg"},[t.name.length>50?a("span",{staticClass:"msg"},[t._v("字數超過上限！")]):t._e(),a("span",{staticClass:"letter-count"},[t._v(t._s(t.name.length)+"/50")])])]),a("div",{staticClass:"form-field email-field"},[a("label",{attrs:{for:"email"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{id:"email",name:"email",type:"email",placeholder:"請輸入Email",required:""},domProps:{value:t.email},on:{input:function(a){a.target.composing||(t.email=a.target.value)}}}),"The email is registered."===t.errorMsg?a("div",{staticClass:"alert-msg"},[a("span",{staticClass:"msg"},[t._v("Email已重複註冊！")])]):t._e(),"Invalid email address."===t.errorMsg?a("div",{staticClass:"alert-msg"},[a("span",{staticClass:"msg"},[t._v("Email格式錯誤")])]):t._e()]),a("div",{staticClass:"form-field password-field"},[a("label",{attrs:{for:"password"}},[t._v("密碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",name:"password",type:"password",placeholder:"請設定密碼",required:""},domProps:{value:t.password},on:{input:function(a){a.target.composing||(t.password=a.target.value)}}})]),a("div",{staticClass:"form-field check-password-field"},[a("label",{attrs:{for:"check-password"}},[t._v("密碼確認")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkPassword,expression:"checkPassword"}],attrs:{id:"check-password",name:"checkPassword",type:"password",placeholder:"請再次輸入密碼",required:""},domProps:{value:t.checkPassword},on:{input:function(a){a.target.composing||(t.checkPassword=a.target.value)}}})])])]),a("div",{staticClass:"btn-container"},[t.isProcessing?a("button",{staticClass:"processing-btn",attrs:{disabled:""}},[t._v("處理中")]):a("button",{staticClass:"save-btn",attrs:{type:"submit",disabled:t.name.length>50}},[t._v("儲存")])])])]),a("div",{staticClass:"col-3 right"}),a("CreateTweetModal")],1)},i=[],s=(e("d9e2"),e("d178")),o=e("5539"),n=e("2fa3"),c=e("2f62"),d=e("4cce"),f={name:"Setting",components:{Navbar:s["a"],CreateTweetModal:o["a"]},data(){return{id:-1,account:"",name:"",email:"",password:"",checkPassword:"",isProcessing:!1,errorMsg:""}},created(){if(-1===this.currentUser.id)return;const{id:t}=this.$route.params;this.fetchUserProfile(t)},computed:{...Object(c["b"])(["currentUser"])},watch:{currentUser(t){this.currentUser={...this.currentUser,...t},this.id=this.currentUser.id,this.account=this.currentUser.account,this.name=this.currentUser.name,this.email=this.currentUser.email}},beforeRouteUpdate(t,a,e){if(-1===this.currentUser.id)return;const{id:r}=t.params;this.fetchUserProfile(r),e()},methods:{fetchUserProfile(t){this.id=this.currentUser.id,this.account=this.currentUser.account,this.name=this.currentUser.name,this.email=this.currentUser.email,this.id!==Number(t)&&this.$router.push("not-found")},async handleSubmit(t){try{if(this.errorMsg="",!(this.account.trim()&&this.email.trim()&&this.name.trim()&&this.password.trim()&&this.checkPassword.trim()))return void n["a"].fire({icon:"warning",title:"請輸入所有欄位，如不更新密碼，請輸入舊密碼"});if(this.password!==this.checkPassword)return this.password="",this.checkPassword="",void n["a"].fire({icon:"warning",title:"兩次密碼輸入不同"});if(this.name.length>50)return void n["a"].fire({icon:"warning",title:"暱稱不可超過50字"});this.isProcessing=!0;const a=t.target,e=new FormData(a),r=await d["a"].update({userId:this.id,formData:e}),{data:i}=r;if("OK"!==r.statusText)throw new Error(i.message);n["a"].fire({icon:"success",title:"更新帳戶資料成功"}),this.password="",this.checkPassword="",this.isProcessing=!1}catch(a){this.isProcessing=!1,console.error(a.message),"The email is registered."===a.message?(this.errorMsg=a.message,n["a"].fire({icon:"error",title:"Email已重複註冊！"})):"The account is registered."===a.message?(this.errorMsg=a.message,n["a"].fire({icon:"error",title:"account已重複註冊！"})):"Name is too long."===a.message?(this.errorMsg=a.message,n["a"].fire({icon:"error",title:"暱稱不可超過50字"})):"Password and checkPassword are not same."===a.message?(this.errorMsg=a.message,n["a"].fire({icon:"error",title:"兩次密碼輸入不相符"})):"Invalid email address."===a.message?(this.errorMsg=a.message,n["a"].fire({icon:"error",title:"Email格式錯誤，請填入有效的Email地址"})):(this.errorMsg=a.message,n["a"].fire({icon:"error",title:"資料更新失敗"}))}}}},l=f,p=(e("0883"),e("2877")),m=Object(p["a"])(l,r,i,!1,null,"0c7b60fa",null);a["default"]=m.exports},"59fc":function(t,a,e){var r=e("8148");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=e("499e").default;i("564ce114",r,!0,{sourceMap:!1,shadowMode:!1})},8148:function(t,a,e){var r=e("24fb");a=r(!1),a.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap);"]),a.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;700&display=swap);"]),a.push([t.i,"body[data-v-0c7b60fa]{margin:0;padding:0;font-family:Noto Sans TC,sans-serif}*[data-v-0c7b60fa]{box-sizing:border-box}h1[data-v-0c7b60fa],h2[data-v-0c7b60fa],h3[data-v-0c7b60fa],h4[data-v-0c7b60fa],h5[data-v-0c7b60fa],h6[data-v-0c7b60fa],p[data-v-0c7b60fa]{margin:0;padding:0}h1[data-v-0c7b60fa],h2[data-v-0c7b60fa]{font-weight:700}h3[data-v-0c7b60fa],h4[data-v-0c7b60fa],h5[data-v-0c7b60fa]{font-weight:medium}h1[data-v-0c7b60fa]{font-size:68px}h2[data-v-0c7b60fa]{font-size:42px}h3[data-v-0c7b60fa]{font-size:28px}h4[data-v-0c7b60fa]{font-size:24px}h5[data-v-0c7b60fa]{font-size:18px}li[data-v-0c7b60fa],ol[data-v-0c7b60fa],ul[data-v-0c7b60fa]{list-style:none;margin:0;padding:0}a[data-v-0c7b60fa],a[data-v-0c7b60fa]:focus,a[data-v-0c7b60fa]:hover{text-decoration:none}img[data-v-0c7b60fa]{width:100%;height:100%;display:block}.btn[data-v-0c7b60fa],a[data-v-0c7b60fa]:focus,button[data-v-0c7b60fa],button[data-v-0c7b60fa]:focus,input[data-v-0c7b60fa]:focus,select[data-v-0c7b60fa],select[data-v-0c7b60fa]:focus,textarea[data-v-0c7b60fa]:focus{outline:0!important}button[data-v-0c7b60fa]{background-color:transparent;border:0;cursor:pointer}button[disabled][data-v-0c7b60fa]{pointer-events:none}input[data-v-0c7b60fa]{padding:0}input[data-v-0c7b60fa]:invalid,input[data-v-0c7b60fa]:required{box-shadow:none}.d-none[data-v-0c7b60fa]{display:none}.setting-wrapper[data-v-0c7b60fa]{width:100%;margin:0 auto;height:914px}.setting-wrapper .setting-form-area[data-v-0c7b60fa]{position:relative;padding-right:24px;padding-left:24px;padding-top:24px;border-right:1px solid #e6ecf0;border-left:1px solid #e6ecf0}.setting-wrapper .setting-form-area h4[data-v-0c7b60fa]{color:#171725;font-weight:700;margin-bottom:24px}.setting-wrapper .setting-form-area hr[data-v-0c7b60fa]{width:100%;position:absolute;color:#e6ecf0;top:62px;left:0}.setting-wrapper .setting-form-area .setting-form-container[data-v-0c7b60fa]{display:flex;justify-content:center}.setting-wrapper .setting-form-area .setting-form-container .form-container[data-v-0c7b60fa]{padding-top:24px;width:593px}.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field[data-v-0c7b60fa]{position:relative;width:100%;height:54px;padding:2px 0 4px 0;margin-bottom:32px;background-color:#f5f8fa;border-radius:2px}.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field.check-password-field[data-v-0c7b60fa]{margin-bottom:0}.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field .alert-msg[data-v-0c7b60fa]{position:absolute;top:54px;left:0;width:100%;margin:4px 0 0 0}.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field .alert-msg span[data-v-0c7b60fa]{font-size:12px}.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field .alert-msg span.msg[data-v-0c7b60fa]{position:absolute;left:0;color:#fc5a5a}.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field .alert-msg span.letter-count[data-v-0c7b60fa]{position:absolute;right:0;color:#696974}.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field>label[data-v-0c7b60fa]{display:block;width:100%;height:22px;font-size:14px;color:#696974;margin-bottom:0;margin-left:10px}.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field input[data-v-0c7b60fa]{width:100%;height:26px;border-color:transparent;background-color:transparent;border-bottom:2px solid #657786;padding-bottom:10px;padding-left:9px}.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field input[data-v-0c7b60fa]:disabled{border-color:transparent;background-color:transparent}.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field input[data-v-0c7b60fa]:focus,.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field input[data-v-0c7b60fa]:hover{border-bottom:2px solid #50b5ff}.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field input.error[data-v-0c7b60fa]{border-bottom:2px solid #fc5a5a}.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field input[data-v-0c7b60fa]::-webkit-input-placeholder{color:#b5b5be;font-size:16px}.setting-wrapper .setting-form-area .btn-container[data-v-0c7b60fa]{display:flex;justify-content:flex-end;margin-top:40px}.setting-wrapper .setting-form-area .btn-container .processing-btn[data-v-0c7b60fa]{background-color:#b5b5be;width:120px;height:46px;border-radius:50px;padding:8px 24px;font-size:20px;color:#fff}.setting-wrapper .setting-form-area .btn-container .save-btn[data-v-0c7b60fa]{width:88px;height:46px;border-radius:50px;background-color:#f60;padding:8px 24px;font-size:20px;color:#fff}.setting-wrapper .setting-form-area .btn-container .save-btn[data-v-0c7b60fa]:disabled{background-color:#b5b5be}",""]),t.exports=a}}]);
//# sourceMappingURL=chunk-a68021f8.ed6d7b4d.js.map